<template>
  <div class="dependency-direction-demo">
    <div class="demo-header">
      <h4>ğŸ”„ ä¾èµ–æ–¹å‘ï¼šåˆ†å±‚æ¶æ„çš„æ ¸å¿ƒè§„åˆ™</h4>
      <p class="subtitle">ç†è§£ä¾èµ–æ–¹å‘ï¼Œæ‰èƒ½çœŸæ­£æŒæ¡åˆ†å±‚æ¶æ„</p>
    </div>

    <!-- ä¾èµ–æ–¹å‘å¯è§†åŒ– -->
    <div class="direction-visualization">
      <div class="arch-diagram">
        <!-- å¤–å±‚ -->
        <div class="layer outer">
          <div class="layer-label">å¤–å±‚ï¼ˆUI / å¤–éƒ¨ç³»ç»Ÿï¼‰</div>
          <div class="layer-box">Controller</div>
        </div>

        <!-- ä¾èµ–ç®­å¤´ -->
        <div class="dependency-arrow down">
          <span class="arrow-line"></span>
          <span class="arrow-head">â–¶ï¸ ä¾èµ–</span>
        </div>

        <!-- ä¸­å±‚ -->
        <div class="layer middle">
          <div class="layer-label">ä¸­å±‚ï¼ˆåº”ç”¨å±‚ï¼‰</div>
          <div class="layer-box">Service</div>
        </div>

        <!-- ä¾èµ–ç®­å¤´ -->
        <div class="dependency-arrow down">
          <span class="arrow-line"></span>
          <span class="arrow-head">â–¶ï¸ ä¾èµ–</span>
        </div>

        <!-- å†…å±‚ -->
        <div class="layer inner">
          <div class="layer-label">å†…å±‚ï¼ˆé¢†åŸŸå±‚ï¼‰</div>
          <div class="layer-box">Domain / Repository</div>
        </div>
      </div>

      <!-- æ ¸å¿ƒåŸåˆ™è¯´æ˜ -->
      <div class="principle-box">
        <div class="principle-title">ğŸ¯ æ ¸å¿ƒåŸåˆ™ï¼šä¾èµ–å€’ç½®ï¼ˆDIPï¼‰</div>
        <div class="principle-content">
          <p><strong>ä¸Šå±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä¸‹å±‚æ¨¡å—çš„å…·ä½“å®ç°ï¼Œè€Œåº”è¯¥ä¾èµ–äºæŠ½è±¡ã€‚</strong></p>
          <div class="rule-list">
            <div class="rule-item">
              <span class="rule-icon">âœ…</span>
              <div class="rule-text">
                <strong>Controller â†’ Service æ¥å£</strong>
                <div class="rule-desc">Controller åªä¾èµ– Service çš„æ¥å£ï¼Œä¸ä¾èµ–å®ç°ç±»</div>
              </div>
            </div>
            <div class="rule-item">
              <span class="rule-icon">âœ…</span>
              <div class="rule-text">
                <strong>Service â†’ Repository æ¥å£</strong>
                <div class="rule-desc">Service åªä¾èµ– Repository æ¥å£ï¼Œä¸å…³å¿ƒæ•°æ®æ€ä¹ˆå­˜</div>
              </div>
            </div>
            <div class="rule-item">
              <span class="rule-icon">âœ…</span>
              <div class="rule-text">
                <strong>æ‰€æœ‰å±‚ä¾èµ– Domain</strong>
                <div class="rule-desc">Domain æ˜¯æ ¸å¿ƒï¼Œè¢«æ‰€æœ‰ä¸Šå±‚ä¾èµ–ï¼Œä½† Domain ä¸ä¾èµ–ä»»ä½•å±‚</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ä¾èµ–æ–¹å‘ç¤ºæ„å›¾ -->
    <div class="direction-diagram">
      <h5>ğŸ“Š ä¾èµ–æ–¹å‘ç¤ºæ„å›¾</h5>
      <div class="diagram-content">
        <pre class="diagram-code">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Controller Layer                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  UserController                                       â”‚  â”‚
â”‚  â”‚  - @Autowired private IUserService userService;      â”‚  â”‚
â”‚  â”‚  âœ… ä¾èµ–æ¥å£ï¼Œä¸ä¾èµ–å®ç°                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                 â”‚
â”‚                            â–¼ ä¾èµ–ï¼ˆDependencyï¼‰               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Service Layer                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  UserServiceImpl                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - @Autowired private UserRepository repository;  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  âœ… ä¾èµ– Repository æ¥å£                         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                      â”‚                              â”‚  â”‚
â”‚  â”‚                      â–¼ ä¾èµ–                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Repository Layer                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  UserRepository                          â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - extends JpaRepository&lt;User, Long&gt;    â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                      â”‚                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                      â–¼ ä¾èµ–                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  Domain Layer (æ ¸å¿ƒé¢†åŸŸ)                   â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  User (Entity)                     â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  - ä¸åŒ…å«ä»»ä½•å±‚ä¾èµ–                  â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  - è¢«æ‰€æœ‰å±‚ä¾èµ–                      â”‚  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </pre>
      </div>
    </div>
  </div>
</template>

<script setup>
// Component logic can be added here if needed
</script>

<style scoped>
.dependency-direction-demo {
  padding: 24px;
  background: linear-gradient(135deg, #f0f7ff 0%, #e6f0ff 100%);
  border-radius: 12px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.demo-header {
  text-align: center;
  margin-bottom: 24px;
}

.demo-header h4 {
  margin: 0 0 8px 0;
  color: #1a1a2e;
  font-size: 18px;
}

.subtitle {
  margin: 0;
  color: #666;
  font-size: 13px;
}

.direction-visualization {
  background: white;
  border-radius: 10px;
  padding: 20px;
  margin-bottom: 24px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}

.arch-diagram {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 24px;
}

.layer {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.layer-label {
  font-size: 11px;
  color: #909399;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.layer-box {
  padding: 16px 20px;
  background: #f5f7fa;
  border-radius: 8px;
  font-weight: 500;
  color: #303133;
  text-align: center;
  border-left: 4px solid #409eff;
}

.layer.outer .layer-box {
  border-left-color: #67c23a;
}

.layer.middle .layer-box {
  border-left-color: #e6a23c;
}

.layer.inner .layer-box {
  border-left-color: #409eff;
}

.dependency-arrow {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 4px 0;
}

.arrow-line {
  width: 2px;
  height: 12px;
  background: #dcdfe6;
}

.arrow-head {
  color: #909399;
  font-size: 11px;
  margin-top: 2px;
}

.principle-box {
  background: linear-gradient(135deg, #e6f7ff 0%, #f0f7ff 100%);
  border-radius: 10px;
  padding: 20px;
  border-left: 4px solid #1890ff;
}

.principle-title {
  font-size: 15px;
  font-weight: 600;
  color: #1a1a2e;
  margin-bottom: 12px;
}

.principle-content p {
  margin: 0 0 12px 0;
  color: #595959;
  font-size: 13px;
  line-height: 1.6;
}

.rule-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.rule-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 10px;
  background: white;
  border-radius: 6px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
}

.rule-icon {
  font-size: 16px;
  flex-shrink: 0;
}

.rule-text {
  flex: 1;
}

.rule-text strong {
  color: #1a1a2e;
  font-size: 13px;
}

.rule-desc {
  color: #8c8c8c;
  font-size: 12px;
  margin-top: 2px;
}

.direction-diagram {
  background: white;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}

.direction-diagram h5 {
  margin: 0 0 16px 0;
  color: #1a1a2e;
  font-size: 15px;
  text-align: center;
}

.diagram-content {
  overflow-x: auto;
}

.diagram-code {
  font-family: 'Monaco', 'Menlo', monospace;
  font-size: 11px;
  line-height: 1.5;
  color: #595959;
  margin: 0;
  white-space: pre;
}

@media (max-width: 768px) {
  .model-cards {
    grid-template-columns: 1fr;
  }

  .comparison-tabs {
    flex-direction: column;
  }

  .tab-btn {
    width: 100%;
    text-align: center;
  }
}
</style>
