<template>
  <div class="clean-architecture-demo">
    <div class="demo-header">
      <h4>ğŸ—ï¸ æ•´æ´æ¶æ„ï¼ˆClean Architectureï¼‰ä¸åˆ†å±‚æ¶æ„</h4>
      <p class="subtitle">åˆ†å±‚æ¶æ„æ˜¯æ•´æ´æ¶æ„çš„åŸºç¡€ï¼Œç†è§£ä¸¤è€…çš„å…³ç³»æœ‰åŠ©äºæ„å»ºæ›´çµæ´»çš„ç³»ç»Ÿ</p>
    </div>

    <!-- æ¶æ„å¯¹æ¯” -->
    <div class="architecture-comparison">
      <div class="comparison-tabs">
        <button
          v-for="tab in tabs"
          :key="tab.id"
          :class="['tab-btn', { active: currentTab === tab.id }]"
          @click="currentTab = tab.id"
        >
          {{ tab.name }}
        </button>
      </div>

      <div class="comparison-content">
        <!-- ä¼ ç»Ÿåˆ†å±‚æ¶æ„ -->
        <div v-if="currentTab === 'layered'" class="tab-panel">
          <div class="arch-diagram layered">
            <div class="layer-box controller">
              <div class="layer-title">Controller å±‚</div>
              <div class="layer-desc">æ¥æ”¶è¯·æ±‚ã€å‚æ•°æ ¡éªŒ</div>
            </div>
            <div class="arrow down">â¬‡ï¸ ä¾èµ–</div>
            <div class="layer-box service">
              <div class="layer-title">Service å±‚</div>
              <div class="layer-desc">ä¸šåŠ¡é€»è¾‘ã€äº‹åŠ¡ç®¡ç†</div>
            </div>
            <div class="arrow down">â¬‡ï¸ ä¾èµ–</div>
            <div class="layer-box repository">
              <div class="layer-title">Repository å±‚</div>
              <div class="layer-desc">æ•°æ®è®¿é—®ã€ORM æ˜ å°„</div>
            </div>
            <div class="arrow down">â¬‡ï¸ ä¾èµ–</div>
            <div class="layer-box domain">
              <div class="layer-title">Domain å±‚</div>
              <div class="layer-desc">å®ä½“å®šä¹‰ã€ä¸šåŠ¡è§„åˆ™</div>
            </div>
          </div>

          <div class="arch-characteristics">
            <h5>ğŸ“Œ ä¼ ç»Ÿåˆ†å±‚æ¶æ„ç‰¹ç‚¹</h5>
            <ul>
              <li><strong>å‚ç›´ä¾èµ–</strong>ï¼šä¸Šå±‚ç›´æ¥ä¾èµ–ä¸‹å±‚ï¼Œä¾èµ–æ–¹å‘ä»ä¸Šåˆ°ä¸‹</li>
              <li><strong>ç®€å•ç›´è§‚</strong>ï¼šç»“æ„æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œå®ç°</li>
              <li><strong>é€‚åˆä¸­å°å‹é¡¹ç›®</strong>ï¼šå¿«é€Ÿå¼€å‘ï¼Œä¸Šæ‰‹ç®€å•</li>
              <li><strong>æ½œåœ¨é—®é¢˜</strong>ï¼šåº•å±‚å˜æ›´å¯èƒ½å½±å“ä¸Šå±‚ï¼Œå¾ªç¯ä¾èµ–é£é™©</li>
            </ul>
          </div>
        </div>

        <!-- æ•´æ´æ¶æ„ -->
        <div v-else-if="currentTab === 'clean'" class="tab-panel">
          <div class="arch-diagram clean">
            <div class="clean-layers">
              <div class="clean-layer framework">
                <div class="layer-name">æ¡†æ¶ä¸é©±åŠ¨å±‚</div>
                <div class="layer-items">Web / DB / UI / å¤–éƒ¨æ¥å£</div>
              </div>
              <div class="clean-layer interface">
                <div class="layer-name">æ¥å£é€‚é…å±‚</div>
                <div class="layer-items">Controller / Gateway / Presenter</div>
              </div>
              <div class="clean-layer application">
                <div class="layer-name">åº”ç”¨å±‚</div>
                <div class="layer-items">Service / UseCase / DTO</div>
              </div>
              <div class="clean-layer domain">
                <div class="layer-name">é¢†åŸŸå±‚ï¼ˆæ ¸å¿ƒï¼‰</div>
                <div class="layer-items">Entity / ValueObject / DomainService</div>
              </div>
            </div>

            <div class="dependency-rule">
              <div class="rule-arrow">
                <span class="arrow-line"></span>
                <span class="arrow-head">â—€ ä¾èµ–æ–¹å‘</span>
              </div>
              <div class="rule-text">
                å¤–å±‚ä¾èµ–å†…å±‚ï¼Œå†…å±‚ä¸ä¾èµ–å¤–å±‚
              </div>
            </div>
          </div>

          <div class="arch-characteristics">
            <h5>ğŸ“Œ æ•´æ´æ¶æ„ç‰¹ç‚¹</h5>
            <ul>
              <li><strong>ä¾èµ–å€’ç½®</strong>ï¼šä¾èµ–æ–¹å‘ä»å¤–åˆ°å†…ï¼Œé€šè¿‡æ¥å£éš”ç¦»</li>
              <li><strong>é¢†åŸŸä¸ºæ ¸å¿ƒ</strong>ï¼šä¸šåŠ¡é€»è¾‘ä½äºä¸­å¿ƒï¼Œç‹¬ç«‹äºæ¡†æ¶</li>
              <li><strong>å¯æµ‹è¯•æ€§å¼º</strong>ï¼šæ ¸å¿ƒä¸šåŠ¡å¯è„±ç¦»æ¡†æ¶è¿›è¡Œå•å…ƒæµ‹è¯•</li>
              <li><strong>æŠ€æœ¯æ— å…³</strong>ï¼šå¯è½»æ¾åˆ‡æ¢æ•°æ®åº“ã€æ¡†æ¶ç­‰å¤–éƒ¨æŠ€æœ¯</li>
            </ul>
          </div>
        </div>

        <!-- å¯¹æ¯”æ€»ç»“ -->
        <div v-else class="tab-panel">
          <div class="comparison-table">
            <table>
              <thead>
                <tr>
                  <th>ç‰¹æ€§</th>
                  <th>ä¼ ç»Ÿåˆ†å±‚æ¶æ„</th>
                  <th>æ•´æ´æ¶æ„</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>ä¾èµ–æ–¹å‘</td>
                  <td>ä»ä¸Šåˆ°ä¸‹</td>
                  <td>ä»å¤–åˆ°å†…</td>
                </tr>
                <tr>
                  <td>æ ¸å¿ƒä¸šåŠ¡ä½ç½®</td>
                  <td>Service å±‚</td>
                  <td>Domain å±‚ï¼ˆä¸­å¿ƒï¼‰</td>
                </tr>
                <tr>
                  <td>æ¡†æ¶ä¾èµ–</td>
                  <td>è¾ƒæ·±ï¼ˆå¦‚ Springï¼‰</td>
                  <td>è¾ƒæµ…ï¼ˆé€šè¿‡æ¥å£éš”ç¦»ï¼‰</td>
                </tr>
                <tr>
                  <td>å¯æµ‹è¯•æ€§</td>
                  <td>éœ€è¦é›†æˆæµ‹è¯•</td>
                  <td>æ ¸å¿ƒå¯å•å…ƒæµ‹è¯•</td>
                </tr>
                <tr>
                  <td>å­¦ä¹ æ›²çº¿</td>
                  <td>å¹³ç¼“</td>
                  <td>è¾ƒé™¡</td>
                </tr>
                <tr>
                  <td>é€‚ç”¨åœºæ™¯</td>
                  <td>ä¸­å°å‹é¡¹ç›®ã€å¿«é€Ÿè¿­ä»£</td>
                  <td>å¤§å‹å¤æ‚ä¸šåŠ¡ã€é•¿æœŸç»´æŠ¤</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="recommendation">
            <h5>ğŸ’¡ é€‰å‹å»ºè®®</h5>
            <div class="rec-grid">
              <div class="rec-card">
                <div class="rec-title">é€‰æ‹©ä¼ ç»Ÿåˆ†å±‚æ¶æ„å½“...</div>
                <ul>
                  <li>é¡¹ç›®è§„æ¨¡è¾ƒå°ï¼Œä¸šåŠ¡ç›¸å¯¹ç®€å•</li>
                  <li>å›¢é˜Ÿå¯¹ DDD ä¸ç†Ÿæ‚‰</li>
                  <li>éœ€è¦å¿«é€Ÿä¸Šçº¿ï¼ŒéªŒè¯å¸‚åœº</li>
                  <li>æŠ€æœ¯æ ˆç›¸å¯¹å›ºå®š</li>
                </ul>
              </div>
              <div class="rec-card recommended">
                <div class="rec-title">é€‰æ‹©æ•´æ´æ¶æ„å½“...</div>
                <ul>
                  <li>ä¸šåŠ¡å¤æ‚ï¼Œé¢†åŸŸæ¨¡å‹ä¸°å¯Œ</li>
                  <li>éœ€è¦é•¿æœŸç»´æŠ¤å’Œæ¼”è¿›</li>
                  <li>éœ€è¦é¢‘ç¹åˆ‡æ¢æŠ€æœ¯æ ˆ</li>
                  <li>å›¢é˜Ÿæœ‰è¾ƒå¼ºçš„è®¾è®¡èƒ½åŠ›</li>
                </ul>
                <div class="rec-badge">æ¨è</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const currentTab = ref('layered')

const tabs = [
  { id: 'layered', name: 'ä¼ ç»Ÿåˆ†å±‚' },
  { id: 'clean', name: 'æ•´æ´æ¶æ„' },
  { id: 'comparison', name: 'å¯¹æ¯”æ€»ç»“' }
]
</script>

<style scoped>
.clean-architecture-demo {
  padding: 24px;
  background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ec 100%);
  border-radius: 12px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.demo-header {
  text-align: center;
  margin-bottom: 24px;
}

.demo-header h4 {
  margin: 0 0 8px 0;
  color: #1a1a2e;
  font-size: 18px;
}

.subtitle {
  margin: 0;
  color: #666;
  font-size: 13px;
}

.architecture-comparison {
  background: white;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}

.comparison-tabs {
  display: flex;
  background: #f5f7fa;
  border-bottom: 1px solid #e4e7ed;
}

.tab-btn {
  padding: 12px 24px;
  border: none;
  background: transparent;
  color: #606266;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
}

.tab-btn:hover {
  color: #409eff;
}

.tab-btn.active {
  color: #409eff;
  background: white;
  font-weight: 500;
}

.tab-btn.active::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: #409eff;
}

.comparison-content {
  padding: 20px;
}

.tab-panel {
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Layered Architecture */
.arch-diagram.layered {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
  margin-bottom: 20px;
}

.layer-box {
  width: 100%;
  max-width: 400px;
  padding: 16px;
  border-radius: 8px;
  text-align: center;
  border-left: 4px solid;
}

.layer-box.controller {
  background: #f0f9ff;
  border-left-color: #52c41a;
}

.layer-box.service {
  background: #fff7e6;
  border-left-color: #fa8c16;
}

.layer-box.repository {
  background: #e6f7ff;
  border-left-color: #1890ff;
}

.layer-box.domain {
  background: #f6ffed;
  border-left-color: #73d13d;
}

.layer-title {
  font-weight: 600;
  color: #1a1a2e;
  margin-bottom: 4px;
}

.layer-desc {
  font-size: 12px;
  color: #666;
}

.arrow {
  color: #909399;
  font-size: 12px;
  text-align: center;
}

.arch-characteristics {
  padding: 16px;
  background: #f8f9fa;
  border-radius: 8px;
}

.arch-characteristics h5 {
  margin: 0 0 12px 0;
  color: #1a1a2e;
  font-size: 14px;
}

.arch-characteristics ul {
  margin: 0;
  padding-left: 20px;
}

.arch-characteristics li {
  margin: 8px 0;
  color: #595959;
  font-size: 13px;
  line-height: 1.5;
}

/* Clean Architecture */
.arch-diagram.clean {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
  margin-bottom: 20px;
}

.clean-layers {
  display: flex;
  flex-direction: column-reverse;
  gap: 8px;
}

.clean-layer {
  padding: 12px 16px;
  border-radius: 8px;
  border-left: 4px solid;
}

.clean-layer.framework {
  background: #f0f0f0;
  border-left-color: #8c8c8c;
}

.clean-layer.interface {
  background: #e6f7ff;
  border-left-color: #1890ff;
}

.clean-layer.application {
  background: #fff7e6;
  border-left-color: #fa8c16;
}

.clean-layer.domain {
  background: #f6ffed;
  border-left-color: #52c41a;
}

.clean-layer .layer-name {
  font-weight: 600;
  color: #1a1a2e;
  font-size: 14px;
  margin-bottom: 4px;
}

.clean-layer .layer-items {
  font-size: 12px;
  color: #666;
}

.dependency-rule {
  background: white;
  border-radius: 8px;
  padding: 16px;
  text-align: center;
  border: 2px dashed #1890ff;
}

.rule-arrow {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-bottom: 8px;
}

.rule-arrow .arrow-line {
  width: 2px;
  height: 20px;
  background: #1890ff;
}

.rule-arrow .arrow-head {
  color: #1890ff;
  font-weight: 600;
  font-size: 14px;
}

.rule-text {
  color: #595959;
  font-size: 13px;
}

/* Comparison Table */
.comparison-table {
  overflow-x: auto;
}

.comparison-table table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.comparison-table th,
.comparison-table td {
  padding: 12px;
  text-align: left;
  border-bottom: 1px solid #e8e8e8;
}

.comparison-table th {
  background: #f5f7fa;
  font-weight: 600;
  color: #1a1a2e;
}

.comparison-table tr:hover {
  background: #fafafa;
}

/* Recommendation */
.recommendation {
  margin-top: 24px;
}

.recommendation h5 {
  margin: 0 0 16px 0;
  color: #1a1a2e;
  font-size: 15px;
  text-align: center;
}

.rec-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.rec-card {
  background: #f8f9fa;
  border-radius: 8px;
  padding: 16px;
  position: relative;
}

.rec-card.recommended {
  background: #f6ffed;
  border: 2px solid #52c41a;
}

.rec-badge {
  position: absolute;
  top: -10px;
  right: 16px;
  background: #52c41a;
  color: white;
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
}

.rec-title {
  font-weight: 600;
  color: #1a1a2e;
  margin-bottom: 12px;
  font-size: 14px;
}

.rec-card ul {
  margin: 0;
  padding-left: 18px;
}

.rec-card li {
  margin: 6px 0;
  color: #595959;
  font-size: 12px;
  line-height: 1.5;
}

@media (max-width: 768px) {
  .rec-grid {
    grid-template-columns: 1fr;
  }
}
</style>
