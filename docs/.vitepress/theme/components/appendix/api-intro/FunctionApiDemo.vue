<template>
  <div class="function-api-demo">
    <div class="header">
      <div class="title">ğŸ”§ ä½ æ—©å°±åœ¨ç”¨ API äº†</div>
      <div class="subtitle">å‡½æ•°å°±æ˜¯æœ€åŸºç¡€çš„ API</div>
    </div>

    <div class="demo-container">
      <div class="left">
        <div class="code-panel">
          <div class="code-title">ğŸ“ ä»£ç </div>
          <pre><code><span class="keyword">def</span> <span class="function">greet</span>(name, greeting=<span class="string">"ä½ å¥½"</span>):
    <span class="keyword">return</span> f<span class="string">"{greeting}ï¼Œ{name}ï¼"</span>

<span class="comment"># è°ƒç”¨è¿™ä¸ªå‡½æ•°</span>
result = <span class="function">greet</span>(<span class="string">"å¼ ä¸‰"</span>)
print(result)</code></pre>
        </div>
      </div>

      <div class="right">
        <div class="explanation">
          <p>è¿™ä¸ª <code>greet()</code> å‡½æ•°ï¼Œå°±æ˜¯ä¸€ä¸ª APIï¼š</p>
          
          <div class="point">
            <span class="icon">ğŸ“¦</span>
            <div>
              <strong>è¾“å…¥ï¼ˆå‚æ•°ï¼‰</strong>
              <p>ä½ ä¼ è¿›å»ä»€ä¹ˆï¼Ÿ<code>"å¼ ä¸‰"</code></p>
            </div>
          </div>

          <div class="point">
            <span class="icon">âš™ï¸</span>
            <div>
              <strong>å¤„ç†</strong>
              <p>å‡½æ•°å†…éƒ¨å¸®ä½ åšäº†æ‹¼æ¥å­—ç¬¦ä¸²çš„æ“ä½œ</p>
            </div>
          </div>

          <div class="point">
            <span class="icon">ğŸ“¤</span>
            <div>
              <strong>è¾“å‡ºï¼ˆè¿”å›å€¼ï¼‰</strong>
              <p>å¾—åˆ°ä»€ä¹ˆï¼Ÿ<code>"ä½ å¥½ï¼Œå¼ ä¸‰ï¼"</code></p>
            </div>
          </div>
        </div>

        <div class="try-it">
          <div class="try-title">ğŸ® è¯•è¯•è°ƒç”¨ï¼š</div>
          <div class="interactive">
            <input
              v-model="name"
              placeholder="è¾“å…¥åå­—"
              class="name-input"
            />
            <select v-model="greeting" class="greeting-select">
              <option value="ä½ å¥½">ä½ å¥½</option>
              <option value="Hello">Hello</option>
              <option value="æ—©ä¸Šå¥½">æ—©ä¸Šå¥½</option>
              <option value="æ™šå®‰">æ™šå®‰</option>
            </select>
            <button @click="callFunction" class="call-btn">è°ƒç”¨ greet()</button>
          </div>
          <div class="result" v-if="result">
            <span class="arrow">â†’</span>
            <code>{{ result }}</code>
          </div>
        </div>
      </div>
    </div>

    <div class="summary">
      <div class="summary-item">
        <span class="icon">ğŸ”‘</span>
        <p><strong>å…³é”®ç‚¹ï¼š</strong> ä½ ä¸éœ€è¦çŸ¥é“å‡½æ•°å†…éƒ¨æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œåªéœ€è¦çŸ¥é“æ€ä¹ˆè°ƒç”¨å®ƒ</p>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const name = ref('å¼ ä¸‰')
const greeting = ref('ä½ å¥½')
const result = ref('')

function greet(name, greeting) {
  return `${greeting}ï¼Œ${name}ï¼`
}

function callFunction() {
  result.value = greet(name.value, greeting.value)
}
</script>

<style scoped>
.function-api-demo {
  background: var(--vp-c-bg-soft);
  border: 1px solid var(--vp-c-divider);
  border-radius: 12px;
  padding: 20px;
  margin: 24px 0;
}

.header {
  text-align: center;
  margin-bottom: 20px;
}

.title {
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 4px;
}

.subtitle {
  font-size: 14px;
  color: var(--vp-c-text-2);
}

.demo-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

@media (max-width: 768px) {
  .demo-container {
    grid-template-columns: 1fr;
  }
}

.code-panel {
  background: #1e293b;
  border-radius: 10px;
  padding: 16px;
  font-family: monospace;
  font-size: 14px;
}

.code-title {
  color: #94a3b8;
  margin-bottom: 12px;
  font-size: 13px;
}

.code-panel code {
  color: #e2e8f0;
  line-height: 1.8;
}

.keyword {
  color: #c084fc;
}

.function {
  color: #60a5fa;
}

.string {
  color: #4ade80;
}

.comment {
  color: #64748b;
}

.explanation {
  margin-bottom: 20px;
}

.explanation > p {
  margin-bottom: 16px;
}

.point {
  display: flex;
  gap: 12px;
  margin-bottom: 12px;
  align-items: flex-start;
}

.point .icon {
  font-size: 20px;
}

.point strong {
  color: var(--vp-c-text-1);
}

.point p {
  margin: 4px 0 0;
  font-size: 13px;
  color: var(--vp-c-text-2);
}

.try-it {
  background: var(--vp-c-bg);
  border: 1px solid var(--vp-c-divider);
  border-radius: 10px;
  padding: 16px;
}

.try-title {
  font-weight: 600;
  margin-bottom: 12px;
}

.interactive {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.name-input {
  flex: 1;
  min-width: 120px;
  padding: 8px 12px;
  border: 1px solid var(--vp-c-divider);
  border-radius: 6px;
  font-size: 14px;
}

.greeting-select {
  padding: 8px 12px;
  border: 1px solid var(--vp-c-divider);
  border-radius: 6px;
  font-size: 14px;
  background: var(--vp-c-bg);
}

.call-btn {
  padding: 8px 16px;
  background: var(--vp-c-brand);
  color: white;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
}

.result {
  margin-top: 16px;
  padding: 12px;
  background: #dcfce7;
  border-radius: 6px;
  font-size: 14px;
}

.result .arrow {
  margin-right: 8px;
}

.result code {
  color: #166534;
}

.summary {
  margin-top: 20px;
  padding-top: 16px;
  border-top: 1px solid var(--vp-c-divider);
}

.summary-item {
  display: flex;
  gap: 12px;
  align-items: center;
  font-size: 14px;
  color: var(--vp-c-text-2);
}

.summary-item .icon {
  font-size: 20px;
}
</style>
